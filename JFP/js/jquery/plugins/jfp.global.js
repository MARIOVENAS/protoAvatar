(function(c){var h=document.location.protocol+"://"+document.location.hostname+(document.location.port?":"+document.location.port:"");var b=function(m,l){return m.protocol==l.protocol&&m.host==l.host&&m.pathname==l.pathname&&m.search==l.search};var e=/\bcL-jfpLinkLayout:(\S+)/;var i=/\bcL-load(Body|Overlay|Full|Popup|Raw)(?::(\S+))?/;var f=function(n){var l={};var p=c(n);var o;var m;while((!l.load||!l.layout)&&n.length>0){o=n.attr("class");if(o){if(!l.load){m=o.match(i);if(m){l.load=[m[1],m[2]]}}if(!l.layout){m=o.match(e);if(m){l.layout=m[1]}}}n=n.parent()}if(!l.load){l.load=["Full"]}if(!l.layout){l.layout=l.load[0]}return l};var g=function(n,m){var l;if(m&&!n.match(/[&?]jfp.layout=[^&]+/)){if(n.indexOf("?")===-1){return n+"?jfp.layout="+m}else{return n+"&jfp.layout"+m}}return n};var a=function(l,m){if(l.is("form")){return g(l.attr("action"),m)}else{return g(l.attr("href"),m)}};var k=function(l,m){if(l.is("form")){return{url:a(l,m),data:l.serialize(),type:"post"}}else{return{url:a(l,m),type:"get"}}};var j=function(m){var l=null;c(m).each(function(){var n=c(this);if(l==null){if(n.is("#jfpBody")){l=n.children()}}else{if(n.is("script")){l=l.add(this)}}});return l};var d={Body:function(l,m){c.ajax(c.extend(k(l,m),{success:function(n){c("#jfpBody").html(j(n))}}))},Overlay:function(l,m){c.ajax(c.extend(k(l,m),{success:function(n){c("#jfpOverlay").html(j(n));c("#jfpOverlay").jfpwidget("setProperty","title",c(n).filter("title").text());c("#jfpOverlay").jfpwidget("open")}}))},Full:function(l,m){if(l.is("form")){l.get(0).submit()}else{document.location=a(l,m)}},Raw:function(m,n,l){c.ajax(c.extend(k(m,n),{success:function(o){c(l).html(j(o))}}))}};c.expr[":"].internal=function(p,n,o,l){var m=c(p).attr("href");return m&&(m.indexOf(h)===0||(m.indexOf("//")===-1&&m.indexOf("javascript:")!==0))};c("a:internal").live("click",function(l){c.jfpsubmit(this);l.preventDefault();l.stopPropagation();return false});c.jfpsubmit=function(l){try{var m=c(l);var o=f(m);d[o.load[0]](m,o.layout,o.load[1])}catch(n){window.console&&console.log(n);throw n}}}(jQuery));