CJW.jfp.widget.Datepicker=JFPWClass.extend(CJW.jfp.widget.Object,{className:"CJW.jfp.widget.Datepicker",selector:null,instance:null,ready:false,initialize:function(d,g,p){d=d||{};g=g||{};p=p||{};this.oCfg={};this.topicConfig={};JFP.cp(this.oCfg,d,{wrapperSet:"__UNK__"});this.selector=this.oCfg.wrapperSet;var k=this;delete this.oCfg.wrapperSet;JFP.cnp(this.oCfg,g);JFP.cnp(this.oCfg,{disableWeekend:false,holidayArray:"",styleClass:"jfpw-dp",showOtherMonths:true,selectOtherMonths:true,dontCreate:false,selectPastDate:false,jsonData:null,highlightedDate:null,customizedStartDate:null,defaultDate:$jq(k.selector)[0].value||new Date()});this.styleClass=this.oCfg.styleClass;this.dontCreate=this.oCfg.dontCreate;var h=this.oCfg.disableWeekend;var j=this.oCfg.selectPastDate;var n=this.oCfg.holidayArray.split(",");var f=this.oCfg.jsonData;var o=this.oCfg.highlightedDate;var c=this.oCfg.customizedStartDate;delete this.oCfg.styleClass;this.applyCfg();var r=function(v,u){$jq(k.selector).first().trigger("beforeshow",{input:v,inst:u})};var s=function(J){var H=true;var C="jfpw-dp-future";var G=null;if(c!=null){G=c}else{G=new Date()}var I=J.getFullYear();var x=G.getFullYear();var A=J.getMonth();var F=G.getMonth();var D=J.getDate();var v=G.getDate();if(typeof $jq(this).jfpwidget()=="undefined"){return[true,"jfpw-dp-future"]}if(o!=null){var w=o;var u=J.getTime()-w.getTime();if(u==0){C="jfpw-dp-payment-due";return[H,C]}}if(j){if(I==x&&A==F&&D==v){C="jfpw-dp-today"}var z=J.getDay();if((z==0||z==6)&&h){H=false;C="jfpw-dp-weekend"}if(f!=null){for(i=0;i<f.length;i++){var y=new Date(f[i]["date"]);var B=J.getTime()-y.getTime();if(B==0&&C!="jfpw-dp-past"){H=false;C="jfpw-dp-holiday";return[H,C]}}return[H,C]}}if(I<x){H=false;C="jfpw-dp-past"}else{if(I==x){if(A<F){H=false;C="jfpw-dp-past"}else{if(A==F&&D<v){H=false;C="jfpw-dp-past"}else{if(A==F&&D==v){C="jfpw-dp-today";var E=G.getDay();if((E==0||E==6)&&h){H=false;C="jfpw-dp-weekend"}}}}}}if(H==true&&C=="jfpw-dp-future"){var z=J.getDay();if((z==0||z==6)&&h){H=false;C="jfpw-dp-weekend"}}if(f!=null){for(i=0;i<f.length;i++){var y=new Date(f[i]["date"]);var B=J.getTime()-y.getTime();if(B==0&&C!="jfpw-dp-past"){H=false;C="jfpw-dp-holiday";return[H,C]}}}return[H,C]};var b=function(v,u,w){$jq(k.selector).first().trigger("onchangemonthyear",{year:v,month:u,inst:w})};var l=function(v,u){$jq(k.selector).first().trigger("onclose",{dateText:v,inst:u})};var a=function(v,u){$jq(k.selector).first().trigger("onselect",{dateText:v,inst:u})};var m=this._wrapCallBack(r,this.oCfg.beforeShow);var e=this._wrapCallBack(b,this.oCfg.onChangeMonthYear);var q=this._wrapCallBack(l,this.oCfg.onClose);var t=this._wrapCallBack(a,this.oCfg.onSelect);JFP.cp(this.oCfg,{beforeShow:m,beforeShowDay:s,onClose:q,onSelect:t,onChangeMonthYear:e});this.setTopics(p);this._create()},applyCfg:function(){if(this.ready==true){this.instance.datepicker("option",this.oCfg)}},getProperty:function(a){return this.instance.datepicker("option",a)},setProperty:function(b,c){var a={};a[b]=c;this._setInternalProperties(a)},setProperties:function(a){a=a||{};this._setInternalProperties(a)},_setInternalProperties:function(a){var c=null;var b=null;for(c in a){b=a[c];switch(c){case"wrapperSet":delete a.wrapperSet;break}}if(this.ready==true){this.instance.datepicker("option",a)}},create:function(){this.dontCreate=false;this._create()},_create:function(){if(this.ready==true){return}if(this.dontCreate==true){return}this.instance=$jq(this.selector).first();this.instance.datepicker(this.oCfg);var c=this.instance.get(0).nodeName.toLowerCase();var b=(c=="div"||c=="span");if(!b){var a=this.instance.datepicker("widget")}else{var a=this.instance.children().eq(0)}a.addClass(this.styleClass);this.ready=true},destroy:function(){if(this.ready==false){return}this._destroy$();this.instance.datepicker("destroy");this.ready=false},disable:function(){if(this.ready==false){return}this.instance.datepicker("disable")},enable:function(){if(this.ready==false){return}this.instance.datepicker("enable")},widget:function(){if(this.ready==false){return}return this.instance},dialog:function(b,a,c,d){if(this.ready==false){return}return this.instance.datepicker("dialog",b,a,c,d)},isDisabled:function(){if(this.ready==false){return}return this.instance.datepicker("isDisabled")},hide:function(){if(this.ready==false){return}this.instance.datepicker("hide")},show:function(){if(this.ready==false){return}this.instance.datepicker("show")},refresh:function(){if(this.ready==false){return}this.instance.datepicker("refresh")},getDate:function(){if(this.ready==false){return}this.instance.datepicker("getDate")},setDate:function(a){if(this.ready==false){return}this.instance.datepicker("setDate",a)}});window.$RDY&&$RDY.complete("CJW.jfp.widget.Datepicker");