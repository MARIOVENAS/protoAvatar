CJW.jfp.widget.AutoSlider=JFPWClass.extend(CJW.jfp.widget.Slider,{className:"CJW.jfp.widget.AutoSlider",initialize:function(c,a,d){var b=this;this.enableTrg=true;this.parent(c,a,d);if(JFP.isTouchSupported()){this._addTouchSupport()}this._autoSlider(b)},_addTouchSupport:function(){var i=$jq(this.oCfg.parent);var o=$jq(this.selector);var b=this.oCfg.orientation;var n=parseInt(this.oCfg.min||0);var e=parseInt(this.oCfg.max||100);var k=0;var j=0;var g=0;var l=function(p){p.preventDefault();k=p.touches[0].pageX;j=p.touches[0].pageY;g=o.slider("option","value")};var m=function(q){if(q.touches.length==1){q.preventDefault();var p=0;if(b=="vertical"){p=((j-q.touches[0].pageY)/o.height());o.jfpwidget().setProperty("value",c((g)+(100*p)))}else{p=((k-q.touches[0].pageX)/o.width());o.jfpwidget().setProperty("value",c((g)-(100*p)))}}};var h=function(p){p.preventDefault()};var d=function(p){k=p.touches[0].pageX;j=p.touches[0].pageY;g=o.slider("option","value")};var f=function(q){if(q.touches.length==1){q.preventDefault();var p=0;if(b=="vertical"){p=((j-q.touches[0].pageY)/i[0].scrollHeight);o.jfpwidget().setProperty("value",c((g)-(100*p)))}else{p=((k-q.touches[0].pageX)/i[0].scrollWidth);o.jfpwidget().setProperty("value",c((g)+(100*p)))}}};var a=function(p){};var c=function(p){var q=parseInt(p);if(q>e){q=e}if(q<n){q=n}return q};o.get(0).addEventListener("touchstart",l,false);o.get(0).addEventListener("touchmove",m,false);o.get(0).addEventListener("touchend",h,false);i.get(0).addEventListener("touchstart",d,false);i.get(0).addEventListener("touchmove",f,false);i.get(0).addEventListener("touchend",a,false)},destroy:function(){if(this.instance!=null){if($jq.browser.msie==true){this.instance.find(".jfpw-slider-icon-"+this.parentOrientation).siblings().remove();this.instance.parent().siblings().remove()}this.instance.unwrap();this.instance.unwrap();this.parent()}},_autoSlider:function(a){var b=this.widget();this.parentName=a.oCfg.parent;this.parentObject=$jq(this.parentName);this.parentOrientation=a.oCfg.orientation;this.parentSize=a.oCfg.parentSize;this.sliderMax=a.oCfg.max;this.slidehadler=a.oCfg.slide;a._addMouseWheel(this.parentObject,b);this.parentObject.css("overflow","hidden");this.parentObject.css("outline","none");this.scrollWrap=b.parent();this.refresh();this.setProperty("value",((this.parentOrientation=="horizontal")?0:this.sliderMax))},refreshWithNoTrg:function(){this.enableTrg=false;this.refresh();this.enableTrg=true},refresh:function(){var i=this;var a=this.widget();var e=function(u,v){if(v==undefined||v==null){if(this.attr(u)==undefined||this.attr(u)==null){return this.prop(u)}return this.attr(u)}else{if(this.attr(u)==undefined||this.attr(u)==null){return this.prop(u,v)}return this.attr(u,v)}};this.parentObject.attrOrProp=e;this.parentObject.attr("tabindex","0");if($jq.browser.msie==true&&!this.blueSlider){a.find(".jfpw-slider-icon-"+this.parentOrientation).siblings().remove();a.parent().siblings().remove()}var r=0;if(this.parentOrientation=="horizontal"){r=parseInt(this.parentObject.attrOrProp("scrollWidth"))-parseInt(this.parentObject.width())}else{r=parseInt(this.parentObject.attrOrProp("scrollHeight"))-parseInt(this.parentObject.outerHeight())}if($jq.browser.msie==true&&r>=2&&r<=4){r=0}if(r>0){this.enable();$jq(this.instance).parent().show();if(this.parentOrientation=="vertical"){var c=r/this.parentObject.attrOrProp("scrollHeight");var b=Math.round((1-c)*this.parentObject.outerHeight());b-=b%2;if(this.blueSlider){b=36}this.scrollWrap.height(this.parentObject.outerHeight()-($jq.browser.msie==true?2:2));var t=$jq.browser.msie==true?5:0;a.find(".ui-slider-handle").css({height:b,"margin-bottom":-0.5*b+1});var n=this.scrollWrap.outerHeight();var g=n-b;var k=(n-g)*0.5+1;if(this.blueSlider){g+=2;k-=2;t=0;if($jq.browser.msie&&$jq.browser.version=="7.0"){g-=5}}a.css({height:g+($jq.browser.msie==true?-3:-1),"margin-top":k-t});a.find(".jfpw-slider-icon-vertical").css({"margin-top":$jq.browser.msie==true?(b/2-9):(b/2-5)})}else{var c=r/this.parentObject.attrOrProp("scrollWidth");var b=Math.round((1-c)*this.parentObject.width());b-=b%2;if(this.blueSlider){b=36}this.scrollWrap.width(this.parentObject.width());var t=$jq.browser.msie==true?8:0;a.find(".ui-slider-handle").css({width:b,"margin-left":-0.5*b+1});var n=this.scrollWrap.width();var g=n-b;var k=(n-g)*0.5-1;if(this.blueSlider){g+=2;k-=2;t=-1}a.css({width:g-($jq.browser.msie==true?3:0),"margin-left":k-t});var m=$jq.browser.msie==true?(b/2.5-5):(b/2-5);var d=$jq.browser.msie==true?b-32-m:"auto";a.find(".jfpw-slider-icon-horizontal").css({"margin-left":m,"margin-right":d,width:"20px"})}if($jq.browser.msie==true&&!this.blueSlider){if(this.parentOrientation=="vertical"){a.find(".jfpw-slider-icon-vertical").before("<div class='jfpw-slider-tip-up'>&nbsp;&nbsp;&nbsp;</div>");a.find(".jfpw-slider-icon-vertical").after("<div class='jfpw-slider-tip-down'>&nbsp;&nbsp;</div>");a.parent().wrap("<div class='jfpw-slider-vertical-corners-wrap bIE'></div>");a.parent().height(a.parent().outerHeight()-11);a.parent().before("<div class='jfpw-slider-vertical-wrap-tip-up'>&nbsp;&nbsp;&nbsp;</div>");a.parent().after("<div class='jfpw-slider-vertical-wrap-tip-down'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>")}else{a.find(".jfpw-slider-icon-horizontal").before("<div class='jfpw-slider-tip-left'>&nbsp;&nbsp;&nbsp;</div>");a.find(".jfpw-slider-icon-horizontal").after("<div class='jfpw-slider-tip-right'>&nbsp;&nbsp;</div>");a.parent().wrap("<div class='jfpw-slider-horizontal-corners-wrap bIE'></div>");a.parent().width(a.parent().width()-16);a.parent().before("<div class='jfpw-slider-horizontal-wrap-tip-left'>&nbsp;&nbsp;&nbsp;</div>");a.parent().after("<div class='jfpw-slider-horizontal-wrap-tip-right'>&nbsp;&nbsp;&nbsp;</div>")}}var l=this.parentObject;var p=(this.parentOrientation=="horizontal")?(l.attrOrProp("scrollWidth")-l.width()):(l.attrOrProp("scrollHeight")-l.height());var q=this.selector;var j=this.parentOrientation;var s=a.find(".ui-slider-handle");a.click(function(u){u.stopPropagation()});this.scrollWrap.click(function(w){if(j=="vertical"){var v=$jq(this).offset().top;var u=(w.pageY-v)*100/$jq(this).height();a.slider("value",100-u)}else{var x=$jq(this).offset().left;var u=(w.pageX-x)*100/$jq(this).width();a.slider("value",u)}});this.parentObject.keydown(function(x){if($jq.ui.keyCode.HOME==x.keyCode||$jq.ui.keyCode.END==x.keyCode||$jq.ui.keyCode.PAGE_UP==x.keyCode||$jq.ui.keyCode.PAGE_DOWN==x.keyCode||$jq.ui.keyCode.UP==x.keyCode||$jq.ui.keyCode.RIGHT==x.keyCode||$jq.ui.keyCode.LEFT==x.keyCode||$jq.ui.keyCode.DOWN==x.keyCode){x.stopPropagation();x.preventDefault()}else{return}var v=a.slider("value");var z=-1;var u=5;var w=a.slider("option","step");var y=a.slider("option","max");switch(x.keyCode){case $jq.ui.keyCode.HOME:z=0;break;case $jq.ui.keyCode.END:z=y;break;case $jq.ui.keyCode.PAGE_UP:z=(v+y/u)>y?y:v+y/u;break;case $jq.ui.keyCode.PAGE_DOWN:z=(v-y/u)<0?0:v-y/u;break;case $jq.ui.keyCode.UP:case $jq.ui.keyCode.RIGHT:z=(v+w)>y?y:v+w;break;case $jq.ui.keyCode.LEFT:case $jq.ui.keyCode.DOWN:z=(v-w)<0?0:v-w;break}a.slider("value",z)});var f=function(u,v){if(j=="horizontal"){l.attrOrProp("scrollLeft",v.value*(p/100))}else{l.attrOrProp("scrollTop",p-(v.value*(p/100)))}$jq(q).first().trigger("slide",{type:"slide",wrapper:this,value:v.value})};var h=function(u,v){if(j=="horizontal"){l.attrOrProp("scrollLeft",v.value*(p/100))}else{l.attrOrProp("scrollTop",p-(v.value*(p/100)))}if(i.enableTrg){$jq(q).first().trigger("change",{type:"change",wrapper:this,value:v.value})

}};var o=this._wrapCallBack(f,this.slidehadler);this.setProperty("slide",o);this.setProperty("change",h);if(j=="vertical"){this.setProperty("value",(100-((this.parentObject.attrOrProp("scrollTop")*100/r))|0))}else{this.setProperty("value",((this.parentObject.attrOrProp("scrollLeft")*100/r)|0))}}else{this.disable();$jq(this.instance).parent().hide()}}});window.$RDY&&$RDY.complete("CJW.jfp.widget.AutoSlider");