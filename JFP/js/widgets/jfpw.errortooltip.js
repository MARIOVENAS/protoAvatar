var foundFirstErrorTooltip=false;var firstErrorTooltipId=null;var firstFieldHasCSError=false;CJW.jfp.widget.errorTooltipHandling=function(b,f,c,h,e,d){var k="#"+b;var g="#tooltiperror_"+b;var a={at:"left center",my:"right center"};var i=(c!="false"?true:false);var j=(h=="true"?true:false);if(f.toLowerCase()=="bottom"){a={at:"bottom center",my:"top center"}}else{if(f.toLowerCase()=="right"){a={at:"right center",my:"left center"}}else{if(f.toLowerCase()=="top"){a={at:"top center",my:"bottom center"}}}}jQuery(g).jfpwidget(new CJW.jfp.widget.Tooltip({wrapperSet:g},{show:{event:false,solo:true},hide:{event:false},type:"error",style:{tip:true},position:a,events:{show:function(m,l){CJW.jfp.widget.errorTooltipShow(b,f,e);if(CJW.jfp.widget.isSelectWidget(k)){l.set("position.target",k+"-button")}else{if(j){k="div#"+b+" label:last";l.set("position.target",k)}else{l.set("position.target",k)}}}}},{}));if(!jQuery.browser.msie){jQuery(g).data("qtip").focus=function(){}}if(CJW.jfp.widget.isSelectWidget(k)){jQuery(k).jfpwidget().setProperty("styleClass","jfp-tooltip-error-content");jQuery(k).jfpwidget("refresh");jQuery(k+"-button").live("focus",function(l){CJW.jfp.widget.focusProcessor(b,d,f);l.stopImmediatePropagation()});jQuery(k+"-button").live("blur",function(l){CJW.jfp.widget.blurProcessor(b,d);l.stopImmediatePropagation()});jQuery(k).bind("selectmenuclose",function(l){CJW.jfp.widget.blurProcessor(b,d);l.stopImmediatePropagation()});jQuery(k).bind("selectmenuopen",function(l){CJW.jfp.widget.focusProcessor(b,d,f);l.stopImmediatePropagation()})}else{jQuery(k).bind("focusin",function(l){CJW.jfp.widget.focusProcessor(b,d,f);l.stopImmediatePropagation()});jQuery(k).bind("focusout",function(l){CJW.jfp.widget.blurProcessor(b,d);l.stopImmediatePropagation()});if(i){jQuery(k).addClass("jfp-tooltip-error-content")}}if(foundFirstErrorTooltip==false){CJW.jfp.widget.showFirstTooltip(b)}};CJW.jfp.widget.showFirstTooltip=function(a){if(CJW.jfp.widget.isSelectWidget("#"+a)){if(!(jQuery("#"+a+"-button").is(":hidden"))){jQuery("#tooltiperror_"+a).jfpwidget("show");foundFirstErrorTooltip=true;firstErrorTooltipId=a;jQuery("#"+a).jfpwidget().setProperty("styleClass","jfp-tooltip-error-content");jQuery("#"+a).jfpwidget("refresh");jQuery("#"+a).focus()}}else{if(!(jQuery("#"+a).is(":hidden"))){jQuery("#tooltiperror_"+a).jfpwidget("show");foundFirstErrorTooltip=true;firstErrorTooltipId=a;jQuery("#"+a).addClass("jfp-tooltip-error-content");jQuery("#"+a).focus()}}};CJW.jfp.widget.invokeCSValidation=function(b,f,a){var g=((a==null||a=="")?"validate"+b:a);var d=window[g];var c=typeof d==="function";var e=null;if(c){e=d(b)}return e};CJW.jfp.widget.resetFieldValue=false;CJW.jfp.widget.focusProcessor=function(b,e,a){if(CJW.jfp.widget.isSelectWidget("#"+b)){jQuery("#"+b+"-button").removeClass("jfp-tooltip-error-content");jQuery("#"+b+"-menu").removeClass("jfp-tooltip-error-content")}else{jQuery("#"+b).removeClass("jfp-tooltip-error-content")}CJW.jfp.widget.resetFieldValue=false;var d=CJW.jfp.widget.invokeCSValidation(b,"in",e);if(d!=null){CJW.jfp.widget.generateCSErrorTooltip(a);if(CJW.jfp.widget.isSelectWidget("#"+b)){jQuery("#"+b+"-button").after(jQuery("#csValidationError").detach())}else{jQuery("#"+b).after(jQuery("#csValidationError").detach())}jQuery("#csValidationError").jfpwidget().set("content.text",d);if(CJW.jfp.widget.isSelectWidget("#"+b)){jQuery("#csValidationError").jfpwidget().set("position.target","#"+b+"-button")}else{jQuery("#csValidationError").jfpwidget().set("position.target","#"+b)}jQuery("#csValidationError").jfpwidget("show");jQuery.each(jQuery('[class~="jfpw-tooltip-eherror"][id!="csValidationError"]'),function(){if(jQuery(this)&&jQuery(this).css("left")!=="-31000px"&&jQuery(this).css("visibility")!=="hidden"){jQuery(this).jfpwidget("hide")}});if(CJW.jfp.widget.resetFieldValue){jQuery("#"+b).val("")}}else{var c="#tooltiperror_"+b;if("object"===typeof jQuery(c).data("qtip")){jQuery(c).jfpwidget("show")}}};CJW.jfp.widget.blurProcessor=function(a,d){CJW.jfp.widget.resetFieldValue=false;var c=CJW.jfp.widget.invokeCSValidation(a,"out",d);if(c!=null){if(CJW.jfp.widget.isSelectWidget("#"+a)){jQuery("#"+a).jfpwidget().setProperty("styleClass","jfp-tooltip-error-content");jQuery("#"+a).jfpwidget("refresh")}else{jQuery("#"+a).addClass("jfp-tooltip-error-content")}if(firstErrorTooltipId!=null&&firstErrorTooltipId==a){firstFieldHasCSError=true}}var b="#tooltiperror_"+a;if("object"===typeof jQuery(b).data("qtip")){jQuery(b).jfpwidget("hide")}if("object"===typeof jQuery("#csValidationError").data("qtip")){jQuery("#csValidationError").data("qtip").destroy();if(jQuery.browser.msie){jQuery("#ui-tooltip-shadow-csValidationError.ui-tooltip-shadow").remove()}jQuery('div[id="csValidationError-info"], span[id="csValidationError"]').remove()}};CJW.jfp.widget.prepareCSValidation=function(b,d,g,c,a){var f=(d=="true"?true:false);var e=(c=="true"?true:false);if(f){if(e){jQuery("#"+b).bind("selectmenuclose",function(h){jQuery("#"+b+"-button").live("focus",function(i){CJW.jfp.widget.focusProcessor(b,g,a);i.stopImmediatePropagation()});jQuery("#"+b+"-button").live("blur",function(i){CJW.jfp.widget.blurProcessor(b,g);i.stopImmediatePropagation()});jQuery("#"+b).bind("selectmenuopen",function(i){CJW.jfp.widget.focusProcessor(b,g,a);i.stopImmediatePropagation()});CJW.jfp.widget.blurProcessor(b,g);h.stopImmediatePropagation()})}else{jQuery("#"+b).bind("focusout",function(h){jQuery("#"+b).bind("focusin",function(i){CJW.jfp.widget.focusProcessor(b,g,a);i.stopImmediatePropagation()});CJW.jfp.widget.blurProcessor(b,g);h.stopImmediatePropagation()})}}};CJW.jfp.widget.generateCSErrorTooltip=function(a){jQuery("body").append('<div tabindex="-1" id="csValidationError-info" style="display:none" class="tooltip-eherror-msg"></div><span id="csValidationError" tabindex="-1" class="jfpw-tooltip-eherror"></span>');var b={at:"right center",my:"left center"};if(a.toLowerCase()=="bottom"){b={at:"bottom center",my:"top center"}}else{if(a.toLowerCase()=="left"){b={at:"left center",my:"right center"}}else{if(a.toLowerCase()=="top"){b={at:"top center",my:"bottom center"}}}}jQuery("#csValidationError").jfpwidget(new CJW.jfp.widget.Tooltip({wrapperSet:"#csValidationError"},{show:{event:false,solo:true},hide:{event:false},type:"error",style:{tip:true},position:b},{}));if(!jQuery.browser.msie){jQuery("#csValidationError").data("qtip").focus=function(){}}};CJW.jfp.widget.isTooltipShown=function(b){var a=jQuery(b).jfpwidget("widget").elements.tooltip;return(a&&a.css("left")!=="-31000px"&&a.css("visibility")!=="hidden")};CJW.jfp.widget.isSelectWidget=function(a){return((jQuery(a).jfpwidget()!=undefined)&&(jQuery(a).jfpwidget().className=="CJW.jfp.widget.Select"))};CJW.jfp.widget.errorTooltipShow=function(a,e,c){var d=firstErrorTooltipId;var b="#"+a;if(d!=null&&d!=a&&!firstFieldHasCSError){jQuery(d).jfpwidget("hide");if(CJW.jfp.widget.isSelectWidget("#"+d)){jQuery("#"+d+"-button").removeClass("jfp-tooltip-error-content");jQuery("#"+d+"-menu").removeClass("jfp-tooltip-error-content")}else{jQuery("#"+d).removeClass("jfp-tooltip-error-content")}}jQuery.each(jQuery('[class~="jfpw-tooltip-eherror"][id!=tooltiperror_"'+a+'"]'),function(){if(jQuery(this)&&jQuery(this).css("left")!=="-31000px"&&jQuery(this).css("visibility")!=="hidden"){jQuery(this).jfpwidget("hide")}});jQuery("#csValidationError").jfpwidget("hide");if(CJW.jfp.widget.isSelectWidget(b)){jQuery(b+"-button").removeClass("jfp-tooltip-error-content");jQuery(b+"-menu").removeClass("jfp-tooltip-error-content")

}else{jQuery(b).removeClass("jfp-tooltip-error-content")}};