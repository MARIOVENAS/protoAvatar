CJW.jfp.widget.DataGrid=JFPWClass.extend(CJW.jfp.widget.Object,{className:"CJW.jfp.widget.DataGrid",wrapperSet:null,instance:null,topics:null,_triggerOnSelectRow:function(b,a){$jq(this).trigger("onSelectRow",[{type:"onSelectRow",wrapper:this,rowid:b}])},_triggerOnSortCol:function(c,b,a){$jq(this).trigger("onSortCol",{type:"onSortCol",wrapper:this,index:c,iCol:b,sortorder:a})},_triggerOnCellSelect:function(b,a,c){$jq(this).trigger("onCellSelect",{type:"onCellSelect",wrapper:this,rowid:b,iCol:a,cellcontent:c})},_triggerOnSelectAll:function(b,a){$jq(this).trigger("onSelectAll",{type:"onSelectAll",wrapper:this,aRowids:b,status:a})},initialize:function(c,a,b){c=c||{};a=a||{};b=b||{};this.oCfg={};this.topicConfig={};JFP.cp(this.oCfg,c,{wrapperSet:"_TABLE_UKN_",label:"Default Label",mtype:"POST",rowTotal:-1,datatype:"local",onSelectRow:this._wrapCallBack(this._triggerOnSelectRow,a.onSelectRow),onSortCol:this._wrapCallBack(this._triggerOnSortCol,a.onSortCol),onCellSelect:this._wrapCallBack(this._triggerOnCellSelect,a.onCellSelect),onSelectAll:this._wrapCallBack(this._triggerOnSelectAll,a.onSelectAll),text:true});JFP.cnp(this.oCfg,a);JFP.cnp(this.oCfg,{styleClass:"jfpw-datagrid"});this.styleClass=this.oCfg.styleClass;this._applyCfg();this.topics=b;this._create()},_applyCfg:function(){this.wrapperSet=this.oCfg.wrapperSet;if(this.oCfg.cellFormater){this.cellFormater=this.oCfg.cellFormater}},getProperty:function(a){return this.instance.getGridParam(a)},setProperty:function(b,c){var a={};a[b]=c;this.instance.setGridParam(a)},setProperties:function(a){a=a||{};this.instance.setGridParam(a)},_create:function(){var b;if(this.instance!=null){return}this.instance=$jq(this.wrapperSet).first().jqGrid(this.oCfg);b=this.instance.getGridParam("colModel");for(var a in b){this.instance.setColProp(b[a]["name"],{formatter:this.cellFormater})}this.selector=this.wrapperSet;this.setTopics(this.topics);this.instance.parents("#gbox_"+this.instance.attr("id")).addClass(this.styleClass);$jq("tr.jqgrow td",$jq(this.wrapperSet)[0]).removeAttr("title");this.refresh();this.triggerPostConstruction()},destroy:function(){if(this.instance==null){return}this._destroy$();this.instance.GridDestroy();this.instance=null},clear:function(){if(this.instance==null){return}this.instance.clearGridData()},refresh:function(){if(this.instance==null){return}this.instance.trigger("reloadGrid")},render:function(a){if(this.instance==null){return}this.instance.clearGridData();this.instance.setGridParam({data:a});this.instance.trigger("reloadGrid")},addRow:function(e,c,b){if(this.instance==null){return}var a=this.instance.getGridParam("data");$jq.merge(a,e);this.instance.clearGridData();this.instance.setGridParam({data:a});this.instance.trigger("reloadGrid")},updateRow:function(c,b,a){if(this.instance==null){return}this.instance.setRowData(c,b,a)},removeRow:function(a){if(this.instance==null){return}this.instance.delRowData(a)},selectedRow:function(){return this.instance.getGridParam("selrow")},cellFormater:function(a){return a},filterByField:function(e,a,c){if(this.instance==null||e==null){return}if(a==""||a==null||c==""||c==null){this.render(e);return}var d=new Array();for(var b=0;b<e.length;b++){if(e[b][a]==c){d.push(e[b])}}this.render(d)},widget:function(){return this.instance}});window.$RDY&&$RDY.complete("CJW.jfp.widget.DataGrid");