CJW.jfp.widget.Tooltip=JFPWClass.extend(CJW.jfp.widget.Object,{className:"CJW.jfp.widget.Tooltip",selector:null,instance:null,ready:false,fixIE:false,initialize:function(i,m,t){i=i||{};m=m||{};t=t||{};this.oCfg={};this.topicConfig={};JFP.cp(this.oCfg,i,{wrapperSet:"__UNK__"});JFP.cnp(this.oCfg,m);JFP.cnp(this.oCfg,{type:"info",styleClass:""});this.selector=this.oCfg.wrapperSet;this.type=this.oCfg.type;this.styleClass=this.oCfg.styleClass;if(this.oCfg.preventDefault==true){$jq(this.selector).click(function(y){y.preventDefault()})}delete this.oCfg.wrapperSet;delete this.oCfg.type;delete this.oCfg.styleClass;delete this.oCfg.preventDefault;var q=this;var f=$jq(q.selector).first();var l=function(y,z){f.trigger("render",{event:y,api:z})};var o=function(y,z){if(!z.elements.titlebar){z.elements.content.css("padding-top","10px")}if($jq.browser.msie){if(this.shadowDiv){this.shadowDiv.css("visibility","")}}f.trigger("show",{event:y,api:z})};var c=function(A,B){if($jq.browser.msie&&this.shadowDiv){this.shadowDiv.css("visibility","hidden")}var z=false;if(A.originalEvent&&A.originalEvent.target&&A.originalEvent.target.className.indexOf("qtip")!=-1){z=true}if(q.type=="error"&&z){try{A.preventDefault()}catch(y){}}f.trigger("hide",{event:A,api:B})};var b=function(y,z){f.trigger("toggle",{event:y,api:z})};var h=function(y,z){f.trigger("focus",{event:y,api:z})};var k=function(y,z){f.trigger("blur",{event:y,api:z})};var j=function(A,C,y){if($jq.browser.msie&&!this.shadowDiv){C.elements.tooltip.css({height:""});var B=C.elements.tooltip.outerWidth();var D=C.elements.tooltip.outerHeight();var z=C.elements.tooltip.css("z-index");if(z<3){z=15001}this.shadowDiv=$jq('<div id="ui-tooltip-shadow-'+g+'"/>').addClass("ui-tooltip-shadow").addClass("ie").appendTo("body").css({position:"absolute","background-color":"white",width:(B-1)+"px",height:(D-1)+"px","z-index":z-3})}if($jq.browser.msie){var B=C.elements.tooltip.outerWidth();var D=C.elements.tooltip.outerHeight();this.shadowDiv.css({width:(B-1)+"px",height:(D-1)+"px",left:y.left,top:y.top})}f.trigger("move",{event:A,api:C})};JFP.cnp(this.oCfg,{events:{}});var u=this._wrapCallBack(l,this.oCfg.events.render);var e=this._wrapCallBack(o,this.oCfg.events.show);var s=this._wrapCallBack(c,this.oCfg.events.hide);var n=this._wrapCallBack(b,this.oCfg.events.toggle);var p=this._wrapCallBack(h,this.oCfg.events.focus);var x=this._wrapCallBack(k,this.oCfg.events.blur);var v=this._wrapCallBack(j,this.oCfg.events.move);JFP.cp(this.oCfg,{events:{render:u,show:e,hide:s,toggle:n,focus:p,blur:x,move:v}});var g=f.attr("id");if(g==undefined){g="_UNK_"}var d=$jq("#"+g+"-info").removeClass("jfpw-tooltip-info").remove();var r=$jq("#"+g+"-title").removeClass("jfpw-tooltip-info").remove();if(r.length==0){var w={content:{title:false,text:d}}}else{var w={content:{title:{text:r,button:true},text:d}}}var a={id:g,overwrite:false,position:{at:"right center",my:"left center",target:f},style:{tip:true,widget:false},show:{effect:false,event:"mouseover"},hide:{effect:false,event:"mouseout"}};$jq.extend(true,a,w);if(this.type=="info"){$jq.extend(true,a,{position:{at:"right center",my:"left center"},style:{classes:"jfpw-tooltip "+this.styleClass+" ui-tooltip-shadow",tip:{corner:"left center",mimic:"left center",border:1,width:15,height:20}}})}else{if(this.type=="error"){$jq.extend(true,a,{position:{at:"left center",my:"right center"},style:{classes:"jfpw-tooltip "+this.styleClass+" jfpw-tooltip-error ui-tooltip-shadow",tip:{corner:"right center",mimic:"right center",border:1,width:12,height:20}}})}}$jq.extend(true,a,this.oCfg);JFP.cp(this.oCfg,a);this.setTopics(t);this._create()},getProperty:function(a){if(this[a]){return this[a]}return this.instance.qtip("option",a)},setProperty:function(b,c){var a={};a[b]=c;this._setInternalProperties(a)},setProperties:function(a){a=a||{};this._setInternalProperties(a)},_setInternalProperties:function(a){if(a.wrapperSet){delete a.wrapperSet}if(this.ready==true){for(attrName in a){var b=a[attrName];this.instance.qtip("option",attrName,b)}}},_create:function(){if(this.ready==true){return}this.instance=$jq(this.selector).first();this.instance.addClass("jfpw-tooltip-cursor");this.instance.qtip(this.oCfg);this.ready=true;this.triggerPostConstruction()},destroy:function(){if(this.ready==false){return}if($jq.browser.msie){this.shadowDiv.remove()}this._destroy$();this.instance.qtip("destroy");this.instance=null;this.ready=false},disable:function(){this.instance.qtip("disable")},enable:function(){this.instance.qtip("enable")},widget:function(){if(this.ready==false){return}return this.instance.qtip("api")},show:function(){if(this.ready==false){return}return this.instance.qtip("show")},hide:function(){if(this.ready==false){return}return this.instance.qtip("hide")},reposition:function(){if(this.ready==false){return}return this.instance.qtip("reposition")},focus:function(){if(this.ready==false){return}return this.instance.qtip("focus")},blur:function(){if(this.ready==false){return}return this.instance.qtip("blur")},render:function(){if(this.ready==false){return}return this.instance.qtip("render")},rendered:function(){if(this.ready==false){return}return this.instance.qtip("api").rendered},toggle:function(a){if(this.ready==false){return}return this.instance.qtip("toggle",a)},set:function(a,b){return this.instance.qtip("api").set(a,b)},checkVML:function(){if(!$jq.browser.msie){return}if(document.namespaces.vml){return}if(!document.documentMode||document.documentMode<8){document.namespaces.add("vml","urn:schemas-microsoft-com:vml")}else{if(document.documentMode&&document.documentMode>=8){document.namespaces.add("vml","urn:schemas-microsoft-com:vml","#default#VML")}}}});window.$RDY&&$RDY.complete("CJW.jfp.widget.Tooltip");