CJW.jfp.widget.AccordionMenu=JFPWClass.extend(CJW.jfp.widget.Object,{className:"CJW.jfp.widget.AccordionMenu",selector:null,instance:null,ready:false,initialize:function(c,a,b){c=c||{};a=a||{};b=b||{};this.oCfg={};this.topicConfig={};JFP.cp(this.oCfg,c,{wrapperSet:"__UNK__"});this.selector=this.oCfg.wrapperSet;JFP.cnp(this.oCfg,a);JFP.cnp(this.oCfg,{styleClass:"jfpw-menu-accordion-container",saveState:false});this.styleClass=this.oCfg.styleClass;delete this.oCfg.styleClass;this.setTopics(b);this._create()},getProperty:function(a){if(this[a]){return this[a]}return null},setProperty:function(b,c){var a={};a[b]=c;this._setInternalProperties(a)},setProperties:function(a){a=a||{};this._setInternalProperties(a)},_setInternalProperties:function(a){if(a.wrapperSet){delete a.wrapperSet}if(a.styleClass){this.styleClass=a.styleClass;delete a.styleClass}},refresh:function(){this.destroy(true);this._create()},_create:function(){if(this.ready==true){return}this.container=$jq(this.selector).wrap('<div class="'+this.styleClass+'" />');this.instance=$jq(this.selector).first();this.instance.removeClass("jfpw-hidden");this.instance.dcAccordion(this.oCfg);this.addClassLevelEx(this.instance,0);this.expandActiveItem();this.ready=true},destroy:function(a){if(this.ready==false){return}if(!a){this._destroy$()}$jq("li a",this.instance).unbind();this.instance.unwrap();var b=["dcjq-parent","active","dcjq-icon","dcjq-count","dcjq-current-parent","dcjq-current-parent-li","dcjq-parent","dcjq-parent-li","jfpw-lvl-0","jfpw-lvl-1","jfpw-lvl-2"];this.instance.parent().find("span.dcjq-icon").remove();this.instance.parent().find("*").each(function(){var d=$jq(this);for(var c=0;c<b.length;c++){d.removeClass(b[c])}});this.instance=null;this.container=null;this.ready=false},disable:function(){if(this.ready==false){return}this.container.attr("disabled",true)},enable:function(){if(this.ready==false){return}this.container.attr("disabled",false)},widget:function(){if(this.ready==false){return}return this.instance},addClassLevel:function(c,b){var a=this;c.addClass("jfpw-lvl-"+b);b++;c.children("li").each(function(){if($jq(this).children("ul").length>0){$jq(this).children("a").each(function(){a.addClassLevel($jq(this),b)});$jq(this).children("ul").each(function(){a.addClassLevel($jq(this),b)})}})},addClassLevelEx:function(b,a){$jq("> ul",b).show();this.addClassLevel(b,a);$jq("> ul",b).hide()},expandActiveItem:function(){var b=[];this.instance.find(".activeAME").each(function(){var d=0;b[d]=$jq(this);d++;$jq(this).children("A").each(function(){$jq(this).parentsUntil("div").each(function(){b[d]=$jq(this);d++})})});var a=0;for(a=b.length-1;a>0;a--){var c=b[a];if(c[0].tagName.toUpperCase()=="LI"){c.children("A").click()}}}});window.$RDY&&$RDY.complete("CJW.jfp.widget.AccordionMenu");